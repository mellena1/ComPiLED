---
version: "3"
services:
  led_api:
    build: /opt/ComPiLED/led_api
    volumes:
      - /opt/ComPiLED/configs:/configs
  led_controller:
    build: /opt/ComPiLED/led_controller
    privileged: true
    stdin_open: true
    tty: true
    volumes:
      - /opt/ComPiLED/current_config:/current_config
  led_frontend:
    build: /opt/ComPiLED/led_frontend
  nginx:
    build: /opt/ComPiLED/nginx
    volumes:
      - /etc/nginx/htpasswd:/etc/nginx/htpasswd:ro
      - /etc/ssl/private/compiled.pem:/etc/nginx/compiled.pem:ro
      - /etc/ssl/crt/compiled.crt:/etc/nginx/compiled.crt:ro
    ports:
      - 80:80
      - 443:443
